from aiogram.types import Message, ReplyKeyboardMarkup, KeyboardButton
from aiogram import Bot, Dispatcher
import logging

logging.basicConfig(level=logging.INFO)

class BotManager:
    def __init__(self, token):
        self.bot = Bot(token=token)
        self.dp = Dispatcher()

        self.register_handlers()
    
    def register_handlers(self):
        @self.dp.message(lambda message: message.text == "/start")
        async def start_command(message: Message):
            welcome_text = (
                "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —á–∞—Ç-–±–æ—Ç ¬´–ì–æ—Ä–æ–¥—Å–∫–æ–π –≥–∏–¥¬ª!\n\n"
                "üéØ *–û–ø–∏—Å–∞–Ω–∏–µ:*\n"
                "–ú—ã –ø–æ–º–æ–≥–∞–µ–º –∂–∏—Ç–µ–ª—è–º –∏ —Ç—É—Ä–∏—Å—Ç–∞–º –†–æ—Å—Ç–æ–≤–∞-–Ω–∞-–î–æ–Ω—É –Ω–∞—Ö–æ–¥–∏—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –º–µ—Å—Ç–∞ –∏ —Å–æ–±—ã—Ç–∏—è, "
                "–∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥—Ö–æ–¥—è—Ç –∏–º–µ–Ω–Ω–æ –≤–∞–º, –∏—Å—Ö–æ–¥—è –∏–∑ –≤–∞—à–∏—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π, –ª–æ–∫–∞—Ü–∏–∏ –∏ –≤—Ä–µ–º–µ–Ω–∏.\n\n"
                "üìå *–¶–µ–ª—å –±–æ—Ç–∞:*\n"
                "–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –º–∞—Ä—à—Ä—É—Ç–∞–º, –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º –∏ –∑–∞–≤–µ–¥–µ–Ω–∏—è–º –≥–æ—Ä–æ–¥–∞, "
                "—É—á–∏—Ç—ã–≤–∞—è –≤–∞—à–∏ –∏–Ω—Ç–µ—Ä–µ—Å—ã –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –≥–æ—Ä–æ–¥–∞ –†–æ—Å—Ç–æ–≤-–Ω–∞-–î–æ–Ω—É.\n\n"
                "üöÄ *–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:*\n"
                "1Ô∏è‚É£ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≥–∞—Å—Ç—Ä–æ–Ω–æ–º–∏—è, –∏—Å–∫—É—Å—Å—Ç–≤–æ, –ø—Ä–æ–≥—É–ª–∫–∏).\n"
                "2Ô∏è‚É£ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –º–µ—Å—Ç —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –∫–∞—Ä—Ç.\n"
                "3Ô∏è‚É£ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö, —Å–∫–∏–¥–∫–∞—Ö –∏ —Ç—Ä–µ–Ω–¥–∞—Ö –≤ –†–æ—Å—Ç–æ–≤–µ-–Ω–∞-–î–æ–Ω—É.\n\n"
                "üí° *–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –Ω–∏–∂–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤—ã–±–æ—Ä–∞!*"
            )

            keyboard = ReplyKeyboardMarkup(
                keyboard=[
                    [KeyboardButton(text="üåü –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –º–µ—Å—Ç–∞"), KeyboardButton(text="üìÖ –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è —Å–µ–≥–æ–¥–Ω—è")], # –≤ –ø–ª–∞–Ω–µ –≤ –≥–æ—Ä–æ–¥–µ, –∫–∞–∫-—Ç–æ —É—Ç–æ—á–Ω–∏—Ç—å
                    [KeyboardButton(text="üç¥ –ì–∞—Å—Ç—Ä–æ–Ω–æ–º–∏—è")],
                ],
                resize_keyboard=True
            )
            await message.reply(welcome_text, parse_mode="Markdown", reply_markup=keyboard)
# —Å–¥–µ–ª–∞—Ç—å –≤—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ, –ø–æ–º–∏–º–æ /start, –≤–¥—Ä—É–≥ —á–µ–ª–æ–≤–µ–∫ –ø–æ—Ç–µ—Ä—è–ª—Å—è –≤ –±–æ—Ç–µ
        @self.dp.message(lambda message: message.text == "/help")
        async def help_command(message: Message):
            await message.reply(
                "–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:\n/start - –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å.\n/help - –í—ã–≤–æ–¥–∏—Ç —Å–ø—Ä–∞–≤–∫—É(—ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ)." # –∫—Ä–∏–Ω–≥–µ? —É–±—Ä–∞—Ç—å... –Ω–∞–≤–µ—Ä–Ω–æ–µ.
            )

    async def run(self):
        logging.info("Bot is starting...")
        await self.bot.delete_webhook(drop_pending_updates=True)
        await self.dp.start_polling(self.bot)
